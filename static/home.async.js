webpackJsonp([1],{285:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(91),a(90)),l=n(o),c=(a(151),a(150)),s=n(c),r=a(95),f=n(r),_=a(13),u=n(_),h=a(68),i=n(h),d=a(17),p=n(d),m=a(16),g=n(m),b=a(14),x=n(b),v=a(1),E=n(v),w=a(384),k=n(w),C=a(10),y=n(C),F=function(e){var t,a=e.className,n=e.onChangeHandle,o=e.sendHandle,l=e.children,c=e.text,s=e.title,r=(0,y.default)((t={},(0,x.default)(t,a,a||!1),(0,x.default)(t,k.default["chat-box"],!0),t));return E.default.createElement("div",{className:r},E.default.createElement(I,null,s),E.default.createElement(M,null,l),E.default.createElement(H,{onChangeHandle:n,sendHandle:o,value:c}))},N=E.default.PropTypes;F.propTypes={className:N.string};var I=function(e){var t=e.children,a=(0,y.default)((0,x.default)({},k.default["chat-title"],!0));return E.default.createElement("div",{className:a},t)},M=function(e){function t(e){(0,u.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return a.componentDidMount=function(){a.scrollChatPanelToBottom()},a.componentDidUpdate=function(){a.scrollChatPanelToBottom()},a.scrollChatPanelToBottom=function(){var e=a.chatPanel;e.scrollTop=e.scrollHeight},a.getChatMessage=function(){var e=a.props.children.message;return E.default.Children.map(e,function(e,t){})},a.chatPanel=null,a}return(0,g.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this,t=(0,y.default)((0,x.default)({},k.default["chat-panel"],!0));return E.default.createElement("div",{className:t,ref:function(t){return e.chatPanel=t}},this.props.children)}}]),t}(E.default.Component),P=function(e){var t,a=e.type,n=void 0===a?"left":a,o=e.children,l=(0,y.default)((0,x.default)({},k.default["chat-message"],!0)),c=(0,y.default)((t={},(0,x.default)(t,k.default["chat-message-content"],!0),(0,x.default)(t,k.default["chat-message-content-right"],"right"==n),(0,x.default)(t,k.default["chat-message-content-left"],"left"==n),t));return E.default.createElement("div",{className:l},E.default.createElement("p",{className:c},o," "))},H=function(e){var t=e.onChangeHandle,a=e.sendHandle,n=e.value,o=(0,y.default)((0,x.default)({},k.default["chat-input-wrap"],!0));return E.default.createElement("div",{className:o},E.default.createElement(s.default,{type:"textarea",value:n,onChange:t,className:k.default["chat-input"],onPressEnter:a}),E.default.createElement(l.default,{className:k.default["chat-button"],onClick:a,size:"small"},"发送"))};F.ChatMessage=P,t.default=F,e.exports=t.default},291:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=(a(67),a(66)),l=n(o),c=a(94),s=n(c),r=a(95),f=n(r),_=a(13),u=n(_),h=a(68),i=n(h),d=a(17),p=n(d),m=a(16),g=n(m),b=a(1),x=n(b),v=a(76),E=(a(77),a(81)),w=n(E),k=a(387),C=n(k),y=a(285),F=n(y),N=a(153),I=F.default.ChatMessage,M=function(e){function t(e){(0,u.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return a.componentDidMount=function(){a.linkToSocket()},a.componentWillReceiveProps=function(e){},a.messageOnChange=function(e){a.setState({text:e.target.value})},a.sendMessage=function(e){var t=a.state,n=t.text,o=t.messages;""!=n&&(o.push({content:n,type:"right"}),a.socket.send((0,s.default)({operaCode:2,content:n})),setTimeout(function(){a.setState({text:"",messages:o})},0))},a.linkToSocket=function(){var e=new WebSocket(N.socketHost);a.socket=e;try{e.onopen=function(t){e.send((0,s.default)({operaCode:1,userName:a.props.log.loginData.userName}))},e.onmessage=function(e){if("string"==typeof e.data){var t=a.state.messages,n=JSON.parse(e.data);3==n.responseCode&&(t.push({content:n.content,type:"left"}),a.setState({messages:t}))}else l.default.info("非文本消息")},e.onclose=function(e){l.default.warn(e.data,3)}}catch(e){l.default.error(e,3)}window.onbeforeunload=function(){try{e.close(),e=null}catch(e){}}},a.state={text:"",messages:[]},a}return(0,g.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.state.messages;return console.info(e),x.default.createElement(w.default,{duration:800,animConfig:{opacity:[1,0],translateY:[0,100]}},x.default.createElement("div",{className:C.default["app-home"],key:"home"},x.default.createElement("h1",null,"home Page"),x.default.createElement(F.default,{onChangeHandle:this.messageOnChange,sendHandle:this.sendMessage,text:this.state.text,title:"Chat with..."},e.map(function(e,t){return x.default.createElement(I,{type:e.type,key:"message"+t},e.content)}))))}}]),t}(x.default.Component),P=function(e){var t=e.log;e.message;return{loading:e.loading.models.log,log:t,message:l.default}};t.default=(0,v.connect)(P)(M),e.exports=t.default},355:function(e,t,a){t=e.exports=a(112)(),t.push([e.id,'.chat-box___36Ffp{display:inline-block;min-width:320px;min-height:440px;background-color:#f7f7f7;position:relative;border:1px solid #ccc;box-shadow:8px 8px 1px hsla(0,0%,80%,.8)}.chat-box___36Ffp .chat-title___vffIm{width:100%;height:30px;line-height:30px;text-indent:1em}.chat-box___36Ffp .chat-panel___2UOJC{width:100%;position:absolute;top:30px;left:0;bottom:20%;background-color:#fff;overflow-Y:scroll}.chat-box___36Ffp .chat-input-wrap___3fIh1{position:absolute;left:0;top:80%;bottom:0;right:0;background-color:#f7f7f7}.chat-box___36Ffp .chat-input-wrap___3fIh1 .chat-input___2fNR7{height:calc(100% - 25px);width:100%;resize:none;border:none;background-color:inherit;padding:10px}.chat-box___36Ffp .chat-input-wrap___3fIh1 .chat-input___2fNR7:focus,.chat-box___36Ffp .chat-input-wrap___3fIh1 .chat-input___2fNR7:hover{border-color:#ccc;outline:none;box-shadow:none}.chat-box___36Ffp .chat-input-wrap___3fIh1 .chat-button___3FMsW{float:right;margin-right:4px}.chat-box___36Ffp .chat-message___hIeE5{padding:10px;overflow:hidden}.chat-box___36Ffp .chat-message___hIeE5 .chat-message-content___18ZG9{max-width:60%;color:#00a2ae;background:#cfedf0;border-color:#cfedf0;padding:5px 10px;position:relative;cursor:pointer;word-break:break-all}.chat-box___36Ffp .chat-message___hIeE5 .chat-message-content___18ZG9:hover{background-color:rgba(207,237,240,.8)}.chat-box___36Ffp .chat-message___hIeE5 .chat-message-content___18ZG9:hover:before{border-bottom-color:rgba(207,237,240,.8)}.chat-box___36Ffp .chat-message___hIeE5 .chat-message-content-left___1nJpj{float:left;margin-left:10px}.chat-box___36Ffp .chat-message___hIeE5 .chat-message-content-right___18Y66{float:right;margin-right:10px}.chat-box___36Ffp .chat-message___hIeE5 .chat-message-content-left___1nJpj:before,.chat-box___36Ffp .chat-message___hIeE5 .chat-message-content-right___18Y66:before{z-index:11;content:"";position:absolute;border:10px solid;border-top-color:transparent;border-bottom-color:#cfedf0;border-left-color:transparent;border-right-color:transparent;width:0;height:0;bottom:0}.chat-box___36Ffp .chat-message___hIeE5 .chat-message-content-left___1nJpj:before{left:-10px}.chat-box___36Ffp .chat-message___hIeE5 .chat-message-content-right___18Y66:before{right:-10px}',""]),t.locals={"chat-box":"chat-box___36Ffp","chat-title":"chat-title___vffIm","chat-panel":"chat-panel___2UOJC","chat-input-wrap":"chat-input-wrap___3fIh1","chat-input":"chat-input___2fNR7","chat-button":"chat-button___3FMsW","chat-message":"chat-message___hIeE5","chat-message-content":"chat-message-content___18ZG9","chat-message-content-left":"chat-message-content-left___1nJpj","chat-message-content-right":"chat-message-content-right___18Y66"}},357:function(e,t,a){t=e.exports=a(112)(),t.push([e.id,".app-home___3d9MN{background-color:#fff}",""]),t.locals={"app-home":"app-home___3d9MN"}},384:function(e,t,a){var n=a(355);"string"==typeof n&&(n=[[e.id,n,""]]);a(144)(n,{});n.locals&&(e.exports=n.locals)},387:function(e,t,a){var n=a(357);"string"==typeof n&&(n=[[e.id,n,""]]);a(144)(n,{});n.locals&&(e.exports=n.locals)}});